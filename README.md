# second kill

简单的秒杀系统



---



- `notes\` 笔记
  1. [分布式会话及登录功能 01](notes/01登录.md)、 [分布式会话及登录功能 02](notes/02分布式会话.md)
  2. [秒杀功能（基本功能）](notes/03秒杀.md)
  3. [简单压测](notes/04压测.md)
  4. [页面优化](notes/05RabbitMQ学习.md)
  5. [RabbitMQ学习](notes/05RabbitMQ学习.md)、[服务接口优化](notes/06服务优化.md)



---

### 1、分布式会话-登录功能总结

0、两次 md5 加密

1、一开始通过参数传递 mobile、password 需要对参数进行判断和校验

2、使用 @Valid 进行参**数校验**，以及自定义参数校验

3、校验失败时有异常，进行**全局异常处理**

4、**分布式 session** 问题，两种方式

5、每一个接口都需要做参数的校验，自定义 **用户参数** ，==在 controller 入口之前就做好了一层校验==



### 2、秒杀功能（基本功能）

0、四张表，独立出秒杀表

1、秒杀商品列表页 -> 商品详情页 -> 秒杀 -> 秒杀订单页/秒杀失败页

- 秒杀倒计时
- 秒杀前提：库存、限制秒杀次数


### 3、系统简单压测
0、jmeter。添加 cookie、自定义变量、请求参数

1、接口压测：

列表接口：读取商品的接口，与用户关联不大

秒杀接口：设计数据库读写，吞吐量明显比列表接口测试的小

出现的问题：商品超卖

> 两个平台上都进行压测，太麻烦，只在 windows 平台进行测试



### 4、页面优化总结

0、页面缓存（也是URL缓存）、和对象缓存（之前分布式 session 用过）

1、页面静态化，包括 商品详情、秒杀、订单详情，了解了一部分缓存配置。

好处：将静态页面缓存在浏览器，服务器只传输数据

2、库存超卖问题。SQL减库存、索引拦截方案、redis缓存


